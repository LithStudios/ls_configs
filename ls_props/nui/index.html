<!DOCTYPE html>
<html lang="en">
<head>
    <script src="js/jquery.js"></script>
    <script src="js/card.js"></script>
</head>
<body>
<div class="UI-CONTAINER">
    <div id="card" class="card">
        <div class="inner-card">
            <img id="image" src="../images/hint.png">
            <span class="glare"></span>
        </div>
    </div>
</div>
</body>
</html>

<script>
    $(document).ready(function () {
        window.addEventListener('message', ({data}) => {
            toggleUI(data.state)

            if (data.fileUrl) {
                $('#image').attr('src', data.fileUrl);
            }
            if (data.size) {
                $('#card').css('height', data.size + '%');
            }
        });

        function toggleUI(state) {
            if (state) {
                $(".UI-CONTAINER").css('display', 'flex');
                $("body").animate({
                    marginTop: "0"
                }, 500);
            } else {
                $("body").animate({
                    marginTop: "100vh"
                }, 500, function () {
                    $(".UI-CONTAINER").hide();
                });
            }
        }

        document.addEventListener('keyup', logKey);
        function logKey(e) {
            if (e.key === 'Escape' || e.key === 'Backspace' || e.key === 'e' || e.key === 'E' || e.key === ' ') {
                fetch(`https://${GetParentResourceName()}/Close`, {
                    method: 'POST',
                })
            }
        }

        $("body").animate({
            marginTop: "100vh"
        }, 500);
    });
</script>

<style>
    body {
        user-select: none;
        overflow: hidden;
    }

    .UI-CONTAINER {
        display: none;
        width: 100vw;
        height: 100vh;
        justify-content: center;
        align-items: center;
        user-select: none;
        overflow: hidden;
        transition-duration: 1s;
    }

    .card {
        display: flex;
        justify-content: center;
        height: 100%;
        width: 100%;
    }

    .card img {
        height: 97%;
        object-fit: contain;
    }

    ::-webkit-scrollbar {
        width: 8px;
    }

    .card {
        box-shadow: none;
        backface-visibility: visible;
        background: transparent;
        font-family: Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;
        transform-style: preserve-3d;
        padding: 0;
        margin: 0 2rem 0 0;
        width: auto;
        height: 100%;
        float: left;
        transition: all 0.3s ease-out;
        border: none;
        letter-spacing: 1px;
    }

    .inner-card {
        transition: all 0.3s ease-out;
    }
</style>
